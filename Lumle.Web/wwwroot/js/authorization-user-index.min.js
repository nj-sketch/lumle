function displaySuccess(n,t){toastr.success(n,t);toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}function displayError(n,t){toastr.error(n,t);toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}var loggedUser="",loggedUserRolePriority="";$(function(){function t(){n=$("#userDataTable").DataTable({language:{url:languageFileUrl},serverSide:!0,ajax:{type:"POST",url:rootDir+"authorization/User/DataHandler",contentType:"application/json; charset=utf-8",headers:{RequestVerificationToken:token},data:function(n){return JSON.stringify(n)},error:function(n){var t=JSON.parse(n.getResponseHeader("X-Responded-JSON"))}},processing:!0,paging:!0,deferRender:!0,columnDefs:[{searchable:!1,orderable:!1,targets:0,width:"5%"},{searchable:!1,orderable:!1,visible:!1,targets:1},{searchable:!1,orderable:!1,width:"15%",targets:4},{searchable:!1,targets:5,width:"10%"},{searchable:!1,targets:6,width:"15%"}],columns:[{data:"sn"},{data:"id"},{data:"name",render:$.fn.dataTable.render.text()},{data:"email"},{data:"roleName"},{data:"accountStatus",render:renderStatus},{data:"emailConfirmed",render:renderEmailConfirmed},{data:"id",title:"Action",render:actionButton,searchable:!1,orderable:!1,visible:hasPermissionForUpdate===!0?!0:hasPermissionForDelete===!0?!0:!1}],order:[1,"asc"]})}var n;loggedUser=$("#loggedUser").attr("value").trim();loggedUserRolePriority=parseInt($("#loggedUserRolePriority").attr("value").trim());t();$(".dataTables_filter input").attr("placeholder","Search...");$("input[type=search]").keyup(function(){var n=$(this).val();n.trim()===""?($("#exportPdf").attr("href",rootDir+"authorization/User/exportpdf"),$("#exportExcel").attr("href",rootDir+"authorization/User/exportexcel")):($("#exportPdf").attr("href",rootDir+"authorization/User/exportpdf/"+n),$("#exportExcel").attr("href",rootDir+"authorization/User/exportexcel/"+n));$("#userDataTable").DataTable().empty().destroy();t()});$("#userDataTable tbody").on("click",".btn-resend",function(t){t.preventDefault();var i=$(this).parents("tr"),r=n.row(i).data(),u=r.id;$(this).hide();i.find("img").show();$.ajax({type:"POST",url:rootDir+"authorization/User/ResendActivationEmail",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u),headers:{RequestVerificationToken:token},success:function(n){n.success&&(i.find("button").show(),i.find("img").hide(),displaySuccess(n.message,n.messageTitle))},error:function(){i.find("button").show();i.find("img").hide();displayError("Opps. something went wrong. Please try again.")}})});$("#exportPdf").attr("target","_blank");$("#exportExcel").attr("target","_blank")});var renderStatus=function(n){return n===1?'<span class="bs-label label-success">Active<\/span>':'<span class="bs-label label-danger">Inactive<\/span>'},renderEmailConfirmed=function(n){return n?'<span class="bs-label label-success"><i class="glyph-icon tooltip-button icon-check-circle" title="Confirmed" data-original-title="Confirmed"><\/i> Confirmed<\/span>':'<span class="bs-label bg-orange alert-icon"><i class="glyph-icon tooltip-button icon-warning" title="Not Confirmed" data-original-title="Not Confirmed"><\/i> Not Confirmed <\/span>'},actionButton=function(n,t,i){var u="deletdModel"+n,r="",f=parseInt(i.rolePriority);return loggedUserRolePriority<=f&&(hasPermissionForUpdate&&(r='<a href="'+rootDir+"authorization/User/edit/"+n+'"class="btn btn-info btn-xs"><i class="glyph-icon icon-pencil"><\/i> '+editButtonDisplayName+"<\/a>"),hasPermissionForDelete&&loggedUser!==i.name.trim()&&(r+='&nbsp;&nbsp;<button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#'+u+'"><i class="glyph-icon icon-trash-o"><\/i> '+deleteButtonDisplayName+"<\/button>",r+=deleteModalSection(u,n,i.name))),i.emailConfirmed||(r+='&nbsp;&nbsp<button class="btn btn-info btn-xs btn-resend"><i class="glyph-icon icon-refresh"><\/i> '+resendButtonDisplayName+'<\/button><img style="width: 30px;display:none" src="'+rootDir+'assets/images/spinner/loader-dark.gif" alt="Sending..." display="none">'),r},deleteModalSection=function(n,t){return'<div id="'+n+'"class="modal fade in"><div class="modal-dialog" style="width:40% !important; margin-top:10% !important;"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">x<\/button><h3 class="modal-title">Delete User<\/h3><\/div><form action="'+rootDir+"authorization/User/delete/"+t+'" role="form" method="post"><input name="__RequestVerificationToken" type="hidden" value="'+token+'"><div class="modal-body">Are you sure you want to delete this record ?<\/div><div class="modal-footer"><button data-dismiss="modal" class="btn btn-default" type="button">'+cancelButtonDisplayName+'<\/button><button class="btn btn-success" type="submit">'+deleteButtonDisplayName+"<\/button><\/div><\/form><\/div><\/div><\/div>"};