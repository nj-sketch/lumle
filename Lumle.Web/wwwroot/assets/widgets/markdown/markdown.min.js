var Markdown;Markdown=typeof exports=="object"&&typeof require=="function"?exports:{},function(){function i(n){return n}function r(){return!1}function n(){}function t(){}n.prototype={chain:function(n,t){var r=this[n];if(!r)throw new Error("unknown hook "+n);this[n]=r===i?t:function(n){return t(r(n))}},set:function(n,t){if(!this[n])throw new Error("unknown hook "+n);this[n]=t},addNoop:function(n){this[n]=i},addFalse:function(n){this[n]=r}};Markdown.HookCollection=n;t.prototype={set:function(n,t){this["s_"+n]=t},get:function(n){return this["s_"+n]}};Markdown.Converter=function(){function rt(n){return n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(n,t,r,f,e,o){return(t=t.toLowerCase(),i.set(t,nt(r)),e)?f:(o&&u.set(t,o.replace(/"/g,"&quot;")),"")})}function p(n){return n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,o),n=n.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),n=n.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,o),n.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o)}function o(n,t){var i=t;return i=i.replace(/^\n+/,""),i=i.replace(/\n+$/g,""),"\n\n~K"+(e.push(i)-1)+"K\n\n"}function c(n,t){n=ot(n);var i="<hr />\n";return n=n.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,i),n=n.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,i),n=n.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,i),n=b(n),n=st(n),n=at(n),n=p(n),vt(n,t)}function s(n){return n=ct(n),n=ut(n),n=yt(n),n=et(n),n=ft(n),n=pt(n),n=n.replace(/~P/g,"://"),n=nt(n),n=lt(n),n.replace(/  +\n/g," <br>\n")}function ut(n){return n.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(n){var t=n.replace(/(.)<\/?code>(?=.)/g,"$1`");return f(t,n.charAt(1)=="!"?"\\`*_/":"\\`*_")})}function ft(n){return n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,l),n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,l),n.replace(/(\[([^\[\]]+)\])()()()()()/g,l)}function l(n,t,r,e,o,s,h,c){var p;c==undefined&&(c="");var w=t,b=r.replace(/:\/\//g,"~P"),v=e.toLowerCase(),l=o,y=c;if(l=="")if(v==""&&(v=b.toLowerCase().replace(/ ?\n/g," ")),l="#"+v,i.get(v)!=undefined)l=i.get(v),u.get(v)!=undefined&&(y=u.get(v));else if(w.search(/\(\s*\)$/m)>-1)l="";else return w;return l=bt(l),l=f(l,"*_"),p='<a href="'+l+'"',y!=""&&(y=a(y),y=f(y,"*_"),p+=' title="'+y+'"'),p+(">"+b+"<\/a>")}function et(n){return n=n.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w),n.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w)}function a(n){return n.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function w(n,t,r,e,o,s,h,c){var b=t,p=r,v=e.toLowerCase(),y=o,l=c,w;if(l||(l=""),y=="")if(v==""&&(v=p.toLowerCase().replace(/ ?\n/g," ")),y="#"+v,i.get(v)!=undefined)y=i.get(v),u.get(v)!=undefined&&(l=u.get(v));else return b;return p=f(a(p),"*_[]()"),y=f(y,"*_"),w='<img src="'+y+'" alt="'+p+'"',l=a(l),l=f(l,"*_"),w+=' title="'+l+'"',w+" />"}function ot(n){return n=n.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(n,t){return"<h1>"+s(t)+"<\/h1>\n\n"}),n=n.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(n,t){return"<h2>"+s(t)+"<\/h2>\n\n"}),n.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(n,t,i){var r=t.length;return"<h"+r+">"+s(i)+"<\/h"+r+">\n\n"})}function b(n){n+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return h?n=n.replace(t,function(n,t,i){var f=t,r=i.search(/[*+-]/g)>-1?"ul":"ol",u=d(f,r);return u=u.replace(/\s+$/,""),"<"+r+">"+u+"<\/"+r+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,n=n.replace(t,function(n,t,i,r){var f=t,e=i,u=r.search(/[*+-]/g)>-1?"ul":"ol",o=d(e,u);return f+"<"+u+">\n"+o+"<\/"+u+">\n"})),n.replace(/~0/,"")}function d(n,t){h++;n=n.replace(/\n{2,}$/,"\n")+"~0";var i=k[t],u=new RegExp("(^[ \\t]*)("+i+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+i+")[ \\t]+))","gm"),r=!1;return n=n.replace(u,function(n,t,i,u){var f=u,h=t,e=/\n\n$/.test(f),o=e||f.search(/\n{2,}/)>-1;return o||r?f=c(v(f),!0):(f=b(v(f)),f=f.replace(/\n$/,""),f=s(f)),r=e,"<li>"+f+"<\/li>\n"}),n=n.replace(/~0/g,""),h--,n}function st(n){return n+="~0",n=n.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(n,t,i){var r=t,u=i;return r=g(v(r)),r=tt(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r='<pre class="prettyprint linenums"><code>'+r+"\n<\/code><\/pre>","\n\n"+r+"\n\n"+u}),n.replace(/~0/,"")}function ht(n){return n=n.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(e.push(n)-1)+"K\n\n"}function ct(n){return n.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(n,t,i,r){var u=r;return u=u.replace(/^([ \t]*)/g,""),u=u.replace(/[ \t]*$/g,""),u=g(u),u=u.replace(/:\/\//g,"~P"),t+"<code>"+u+"<\/code>"})}function g(n){return n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),f(n,"*_{}[]\\",!1)}function lt(n){return n=n.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3<\/strong>$4"),n.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3<\/em>$4")}function at(n){return n.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(n,t){var i=t;return i=i.replace(/^[ \t]*>[ \t]?/gm,"~0"),i=i.replace(/~0/g,""),i=i.replace(/^[ \t]+$/gm,""),i=c(i),i=i.replace(/(^|\n)/g,"$1  "),i=i.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(n,t){var i=t;return i=i.replace(/^  /mg,"~0"),i.replace(/~0/g,"")}),ht("<blockquote>\n"+i+"\n<\/blockquote>")})}function vt(n,t){var i,r,f;n=n.replace(/^\n+/g,"");n=n.replace(/\n+$/g,"");var h=n.split(/\n{2,}/g),u=[],o=h.length;for(r=0;r<o;r++)i=h[r],/~K(\d+)K/.test(i)?u.push(i):/\S/.test(i)&&(i=s(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="<\/p>",u.push(i));if(!t)for(o=u.length,r=0;r<o;r++)for(f=!0;f;)f=!1,u[r]=u[r].replace(/~K(\d+)K/g,function(n,t){return f=!0,e[t]});return u.join("\n\n")}function nt(n){return n=n.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),n.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}function yt(n){return n=n.replace(/\\(\\)/g,y),n.replace(/\\([`*_{}\[\]()>#+-.!])/g,y)}function pt(n){var t,i;return n=n.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4"),t=function(n,t){return'<a href="'+t+'">'+r.plainLinkText(t)+"<\/a>"},n=n.replace(/<((https?|ftp):[^'">\s]+)>/gi,t),i=function(n,t){var i="mailto:",u,f;return t.substring(0,i.length)!=i?(u=i+t,f=t):(u=t,f=t.substring(i.length,t.length)),'<a href="'+u+'">'+r.plainLinkText(f)+"<\/a>"},n.replace(/<((?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+))>/gi,i)}function wt(n){return n.replace(/~E(\d+)E/g,function(n,t){var i=parseInt(t);return String.fromCharCode(i)})}function v(n){return n=n.replace(/^(\t|[ ]{1,4})/gm,"~0"),n.replace(/~0/g,"")}function tt(n){if(!/\t/.test(n))return n;var r=["    ","   ","  "," "],t=0,i;return n.replace(/[\n\t]/g,function(n,u){return n==="\n"?(t=u+1,n):(i=(u-t)%4,t=u+1,r[i])})}function bt(n){if(!n)return"";var t=n.length;return n.replace(it,function(i,r){return i=="~D"?"%24":i==":"&&(r==t-1||/[0-9\/]/.test(n.charAt(r+1))||n.substring(0,7)==="mailto:"||n.substring(0,7)==="magnet:")?":":"%"+i.charCodeAt(0).toString(16)})}function f(n,t,i){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])",u;return i&&(r="\\\\"+r),u=new RegExp(r,"g"),n.replace(u,y)}function y(n,t){var i=t.charCodeAt(0);return"~E"+i+"E"}var r=this.hooks=new n,i,u,e,h,k,it;r.addNoop("plainLinkText");r.addNoop("preConversion");r.addNoop("postConversion");this.makeHtml=function(n){if(i)throw new Error("Recursive call to converter.makeHtml");return i=new t,u=new t,e=[],h=0,n=r.preConversion(n),n=n.replace(/~/g,"~T"),n=n.replace(/\$/g,"~D"),n=n.replace(/\r\n/g,"\n"),n=n.replace(/\r/g,"\n"),n="\n\n"+n+"\n\n",n=tt(n),n=n.replace(/^[ \t]+$/mg,""),n=p(n),n=rt(n),n=c(n),n=wt(n),n=n.replace(/~D/g,"$$"),n=n.replace(/~T/g,"~"),n=r.postConversion(n),e=u=i=null,n};k={ol:"\\d+[.]",ul:"[*+-]"};it=/(?:["'*()[\]:]|~D)/g}}(),function(){function s(){}function b(t){this.buttonBar=n.getElementById("wmd-button-bar"+t);this.preview=n.getElementById("wmd-preview"+t);this.input=n.getElementById("wmd-input"+t)}function k(n,i){var l=this,e=[],r=0,o="none",u,v,a,s=function(n,t){o!=n&&(o=n,t||y());f.isIE&&o=="moving"?a=null:v=setTimeout(c,1)},c=function(n){a=new h(i,n);v=undefined};this.setCommandMode=function(){o="command";y();v=setTimeout(c,0)};this.canUndo=function(){return r>1};this.canRedo=function(){return e[r+1]?!0:!1};this.undo=function(){l.canUndo()&&(u?(u.restore(),u=null):(e[r]=new h(i),e[--r].restore(),n&&n()));o="none";i.input.focus();c()};this.redo=function(){l.canRedo()&&(e[++r].restore(),n&&n());o="none";i.input.focus();c()};var y=function(){var t=a||new h(i);if(!t)return!1;if(o=="moving"){u||(u=t);return}u&&(e[r-1].text!=u.text&&(e[r++]=u),u=null);e[r++]=t;e[r+1]=null;n&&n()},p=function(n){var t=!1,i,r;if(n.ctrlKey||n.metaKey){i=n.charCode||n.keyCode;r=String.fromCharCode(i);switch(r){case"y":l.redo();t=!0;break;case"z":n.shiftKey?l.redo():l.undo();t=!0}}if(t){n.preventDefault&&n.preventDefault();window.event&&(window.event.returnValue=!1);return}},w=function(n){if(!n.ctrlKey&&!n.metaKey){var t=n.keyCode;t>=33&&t<=40||t>=63232&&t<=63235?s("moving"):t==8||t==46||t==127?s("deleting"):t==13?s("newlines"):t==27?s("escape"):(t<16||t>20)&&t!=91&&s("typing")}},b=function(){t.addEvent(i.input,"keypress",function(n){(n.ctrlKey||n.metaKey)&&(n.keyCode==89||n.keyCode==90)&&n.preventDefault()});var n=function(){(f.isIE||a&&a.text!=i.input.value)&&v==undefined&&(o="paste",y(),c())};t.addEvent(i.input,"keydown",p);t.addEvent(i.input,"keydown",w);t.addEvent(i.input,"mousedown",function(){s("moving")});i.input.onpaste=n;i.input.ondrop=n},k=function(){b();c(!0);y()};k()}function h(i,r){var e=this,u=i.input;this.init=function(){t.isVisible(u)&&(r||!n.activeElement||n.activeElement===u)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=u.scrollTop,(!this.text&&u.selectionStart||u.selectionStart===0)&&(this.text=u.value))};this.setInputAreaSelection=function(){if(t.isVisible(u))if(u.selectionStart===undefined||f.isOpera){if(n.selection){if(n.activeElement&&n.activeElement!==u)return;u.focus();var i=u.createTextRange();i.moveStart("character",-u.value.length);i.moveEnd("character",-u.value.length);i.moveEnd("character",e.end);i.moveStart("character",e.start);i.select()}}else u.focus(),u.selectionStart=e.start,u.selectionEnd=e.end,u.scrollTop=e.scrollTop};this.setInputAreaSelectionStartEnd=function(){var s,h;if(!i.ieCachedRange&&(u.selectionStart||u.selectionStart===0))e.start=u.selectionStart,e.end=u.selectionEnd;else if(n.selection){e.text=t.fixEolChars(u.value);var r=i.ieCachedRange||n.selection.createRange(),f=t.fixEolChars(r.text),o="\x07",c=o+f+o;if(r.text=c,s=t.fixEolChars(u.value),r.moveStart("character",-c.length),r.text=f,e.start=s.indexOf(o),e.end=s.lastIndexOf(o)-o.length,h=e.text.length-t.fixEolChars(u.value).length,h){for(r.moveStart("character",-f.length);h--;)f+="\n",e.end+=1;r.text=f}i.ieCachedRange&&(e.scrollTop=i.ieCachedScrollTop);i.ieCachedRange=null;this.setInputAreaSelection()}};this.restore=function(){e.text!=undefined&&e.text!=u.value&&(u.value=e.text);this.setInputAreaSelection();u.scrollTop=e.scrollTop};this.getChunks=function(){var n=new s;return n.before=t.fixEolChars(e.text.substring(0,e.start)),n.startTag="",n.selection=t.fixEolChars(e.text.substring(e.start,e.end)),n.endTag="",n.after=t.fixEolChars(e.text.substring(e.end)),n.scrollTop=e.scrollTop,n};this.setChunks=function(n){n.before=n.before+n.startTag;n.after=n.endTag+n.after;this.start=n.before.length;this.end=n.before.length+n.selection.length;this.text=n.before+n.selection+n.after;this.scrollTop=n.scrollTop};this.init()}function d(i,r,e){var ut=this,s,h,c,a=3e3,v="delayed",k=function(n,i){t.addEvent(n,"input",i);n.onpaste=i;n.ondrop=i;t.addEvent(n,"keypress",i);t.addEvent(n,"keydown",i)},y=function(){var t=0;return window.innerHeight?t=window.pageYOffset:n.documentElement&&n.documentElement.scrollTop?t=n.documentElement.scrollTop:n.body&&(t=n.body.scrollTop),t},l=function(){var n,t,u;r.preview&&((n=r.input.value,n&&n==c)||(c=n,t=(new Date).getTime(),n=i.makeHtml(n),u=(new Date).getTime(),h=u-t,it(n)))},p=function(){if(s&&(clearTimeout(s),s=undefined),v!=="manual"){var n=0;v==="delayed"&&(n=h);n>a&&(n=a);s=setTimeout(l,n)}},d=function(n){return n.scrollHeight<=n.clientHeight?1:n.scrollTop/(n.scrollHeight-n.clientHeight)},g=function(){r.preview&&(r.preview.scrollTop=(r.preview.scrollHeight-r.preview.clientHeight)*d(r.preview))};this.refresh=function(n){n?(c="",l()):p()};this.processingTime=function(){return h};var w=!0,nt=function(n){var t=r.preview,i=t.parentNode,u=t.nextSibling;i.removeChild(t);t.innerHTML=n;u?i.insertBefore(t,u):i.appendChild(t)},b=function(n){r.preview.innerHTML=n},o,tt=function(n){if(o)return o(n);try{b(n);o=b}catch(t){o=nt;o(n)}},it=function(n){var i=u.getTop(r.input)-y(),t;if(r.preview&&(tt(n),e()),g(),w){w=!1;return}t=u.getTop(r.input)-y();f.isIE?setTimeout(function(){window.scrollBy(0,t-i)},0):window.scrollBy(0,t-i)},rt=function(){k(r.input,p);l();r.preview&&(r.preview.scrollTop=0)};rt()}function g(n,i,r,u,o,s){function l(n){var t;if(v.focus(),n.textOp){if(r&&r.setCommandMode(),t=new h(i),!t)return;var f=t.getChunks(),e=function(){v.focus();f&&t.setChunks(f);t.restore();u.refresh()},o=n.textOp(f,e);o||e()}n.execute&&n.execute(r)}function y(n,t){t?(n.disabled=!1,n.isHelp||(n.onclick=function(){return this.onmouseout&&this.onmouseout(),l(this),!1})):n.disabled=!0}function a(n){return typeof n=="string"&&(n=o[n]),function(){n.apply(o,arguments)}}function k(){var l=i.buttonBar,u=document.createElement("div"),t,f,h,r,o;u.id="wmd-button-row"+n;u.className="btn-toolbar";u=l.appendChild(u);t=function(t,i,r,f,e){var o=document.createElement("button"),s;return o.className="btn btn-default",s=document.createElement("i"),s.className=r,o.id=t+n,o.appendChild(s),o.title=i,$(o).tooltip({placement:"bottom",container:"body"}),f&&(o.textOp=f),y(o,!0),e?e.appendChild(o):u.appendChild(o),o};f=function(t){var i=document.createElement("div");return i.className="btn-group wmd-button-group"+t,i.id="wmd-button-group"+t+n,u.appendChild(i),i};group1=f(1);c.bold=t("wmd-bold-button","Bold - Ctrl+B","glyph-icon icon-bold",a("doBold"),group1);c.italic=t("wmd-italic-button","Italic - Ctrl+I","glyph-icon icon-italic",a("doItalic"),group1);group2=f(2);c.link=t("wmd-link-button","Link - Ctrl+L","glyph-icon icon-link",a(function(n,t){return this.doLinkOrImage(n,t,!1)}),group2);c.quote=t("wmd-quote-button","Blockquote - Ctrl+Q","glyph-icon icon-quote-left",a("doBlockquote"),group2);c.code=t("wmd-code-button","Code Sample - Ctrl+K","glyph-icon icon-code",a("doCode"),group2);c.image=t("wmd-image-button","Image - Ctrl+G","glyph-icon icon-picture-o",a(function(n,t){return this.doLinkOrImage(n,t,!0)}),group2);group3=f(3);c.olist=t("wmd-olist-button","Numbered List - Ctrl+O","glyph-icon icon-list-ol",a(function(n,t){this.doList(n,t,!0)}),group3);c.ulist=t("wmd-ulist-button","Bulleted List - Ctrl+U","glyph-icon icon-list-ul",a(function(n,t){this.doList(n,t,!1)}),group3);c.heading=t("wmd-heading-button","Heading - Ctrl+H","glyph-icon icon-header",a("doHeading"),group3);c.hr=t("wmd-hr-button","Horizontal Rule - Ctrl+R","glyph-icon icon-ellipsis-h",a("doHorizontalRule"),group3);group4=f(4);c.undo=t("wmd-undo-button","Undo - Ctrl+Z","glyph-icon icon-undo",null,group4);c.undo.execute=function(n){n&&n.undo()};h=/win/.test(e.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";c.redo=t("wmd-redo-button",h,"glyph-icon icon-rotate-right",null,group4);c.redo.execute=function(n){n&&n.redo()};s&&(group5=f(5),group5.className=group5.className+" pull-right",r=document.createElement("button"),o=document.createElement("i"),o.className="glyph-icon icon-question",r.appendChild(o),r.className="btn",r.id="wmd-help-button"+n,r.isHelp=!0,r.title=s.title||w,$(r).tooltip({placement:"bottom",container:"body"}),r.onclick=s.handler,y(r,!0),group5.appendChild(r),c.help=r);b()}function b(){r&&(y(c.undo,r.canUndo()),y(c.redo,r.canRedo()))}var v=i.input,c={},p;k();p="keydown";f.isOpera&&(p="keypress");t.addEvent(v,p,function(n){if((n.ctrlKey||n.metaKey)&&!n.altKey&&!n.shiftKey){var t=n.charCode||n.keyCode,i=String.fromCharCode(t).toLowerCase();switch(i){case"b":l(c.bold);break;case"i":l(c.italic);break;case"l":l(c.link);break;case"q":l(c.quote);break;case"k":l(c.code);break;case"g":l(c.image);break;case"o":l(c.olist);break;case"u":l(c.ulist);break;case"h":l(c.heading);break;case"r":l(c.hr);break;case"y":l(c.redo);break;case"z":n.shiftKey?l(c.redo):l(c.undo);break;default:return}n.preventDefault&&n.preventDefault();window.event&&(window.event.returnValue=!1)}});t.addEvent(v,"keyup",function(n){var i,t;!n.shiftKey||n.ctrlKey||n.metaKey||(i=n.charCode||n.keyCode,i===13&&(t={},t.textOp=a("doAutoindent"),l(t)))});f.isIE&&t.addEvent(v,"keydown",function(n){var t=n.keyCode;if(t===27)return!1});this.setUndoRedoButtonStates=b}function l(n){this.hooks=n}function nt(n){return n.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(n,t,i){return t=t.replace(/\?.*$/,function(n){return n.replace(/\+/g," ")}),t=decodeURIComponent(t),t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),t=t.replace(/\?.*$/,function(n){return n.replace(/\+/g,"%2b")}),i&&(i=i.trim?i.trim():i.replace(/^\s*/,"").replace(/\s*$/,""),i=$.trim(i).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),i?t+' "'+i+'"':t})}var t={},u={},c={},n=window.document,r=window.RegExp,e=window.navigator,o={lineLength:72},f={isIE:/msie/.test(e.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(e.userAgent.toLowerCase())||/msie 5/.test(e.userAgent.toLowerCase()),isOpera:/opera/.test(e.userAgent.toLowerCase())},a='<code>http://example.com/ "optional title"<\/code>',v='<code>http://example.com/images/diagram.jpg "optional title"<\/code>',y="http://",p="http://",w="Markdown Editing Help",i;Markdown.Editor=function(t,i,r){var u,e,f;i=i||"";u=this.hooks=new Markdown.HookCollection;u.addNoop("onPreviewRefresh");u.addNoop("postBlockquoteCreation");u.addFalse("insertImageDialog");this.getConverter=function(){return t};e=this;this.run=function(){var c,o,h,s,a;f||(f=new b(i),c=new l(u),o=new d(t,f,function(){u.onPreviewRefresh()}),/\?noundo/.test(n.location.href)||(h=new k(function(){o.refresh();s&&s.setUndoRedoButtonStates()},f),this.textOperation=function(n){h.setCommandMode();n();e.refreshPreview()}),s=new g(i,f,h,o,c,r),s.setUndoRedoButtonStates(),a=e.refreshPreview=function(){o.refresh(!0)},a())}};s.prototype.findTags=function(n,i){var r=this,u;n&&(u=t.extendRegExp(n,"","$"),this.before=this.before.replace(u,function(n){return r.startTag=r.startTag+n,""}),u=t.extendRegExp(n,"^",""),this.selection=this.selection.replace(u,function(n){return r.startTag=r.startTag+n,""}));i&&(u=t.extendRegExp(i,"","$"),this.selection=this.selection.replace(u,function(n){return r.endTag=n+r.endTag,""}),u=t.extendRegExp(i,"^",""),this.after=this.after.replace(u,function(n){return r.endTag=n+r.endTag,""}))};s.prototype.trimWhitespace=function(n){var t,i,r=this;n?t=i="":(t=function(n){return r.before+=n,""},i=function(n){return r.after=n+r.after,""});this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,i)};s.prototype.skipLines=function(n,t,i){n===undefined&&(n=1);t===undefined&&(t=1);n++;t++;var u,f;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+r.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+r.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+r.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+r.$1,this.before){for(u=f="";n--;)u+="\\n?",f+="\n";i&&(u="\\n*");this.before=this.before.replace(new r(u+"$",""),f)}if(this.after){for(u=f="";t--;)u+="\\n?",f+="\n";i&&(u="\\n*");this.after=this.after.replace(new r(u,""),f)}};t.isVisible=function(n){return window.getComputedStyle?window.getComputedStyle(n,null).getPropertyValue("display")!=="none":n.currentStyle?n.currentStyle.display!=="none":void 0};t.addEvent=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener(t,i,!1)};t.removeEvent=function(n,t,i){n.detachEvent?n.detachEvent("on"+t,i):n.removeEventListener(t,i,!1)};t.fixEolChars=function(n){return n=n.replace(/\r\n/g,"\n"),n.replace(/\r/g,"\n")};t.extendRegExp=function(n,t,i){(t===null||t===undefined)&&(t="");(i===null||i===undefined)&&(i="");var u=n.toString(),f;return u=u.replace(/\/([gim]*)$/,function(n,t){return f=t,""}),u=u.replace(/(^\/|\/$)/g,""),u=t+u+i,new r(u,f)};u.getTop=function(n,t){var i=n.offsetTop;if(!t)while(n=n.offsetParent)i+=n.offsetTop;return i};u.getHeight=function(n){return n.offsetHeight||n.scrollHeight};u.getWidth=function(n){return n.offsetWidth||n.scrollWidth};u.getPageSize=function(){var r,u,t,i,f,e;return self.innerHeight&&self.scrollMaxY?(r=n.body.scrollWidth,u=self.innerHeight+self.scrollMaxY):n.body.scrollHeight>n.body.offsetHeight?(r=n.body.scrollWidth,u=n.body.scrollHeight):(r=n.body.offsetWidth,u=n.body.offsetHeight),self.innerHeight?(t=self.innerWidth,i=self.innerHeight):n.documentElement&&n.documentElement.clientHeight?(t=n.documentElement.clientWidth,i=n.documentElement.clientHeight):n.body&&(t=n.body.clientWidth,i=n.body.clientHeight),f=Math.max(r,t),e=Math.max(u,i),[f,e,t,i]};c.prompt=function(i,r,u,f){var o,e;u===undefined&&(u="");var h=function(n){var t=n.charCode||n.keyCode;t===27&&s(!0)},s=function(i){t.removeEvent(n.body,"keydown",h);var r=e.value;return i?r=null:(r=r.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(r)||(r="http://"+r)),$(o).modal("hide"),f(r),!1},c=function(){var w,c,b,v,y,k,p,f,l,a;o=n.createElement("div");o.className="modal fade";w=n.createElement("div");w.className="modal-dialog";o.appendChild(w);c=n.createElement("div");c.className="modal-content";w.appendChild(c);b=n.createElement("div");b.className="modal-header";b.innerHTML='<a class="close" data-dismiss="modal">Ã—<\/a> <h3 class="modal-title">'+i+"<\/h3>";c.appendChild(b);v=n.createElement("div");v.className="modal-body";c.appendChild(v);y=n.createElement("div");y.className="modal-footer";c.appendChild(y);k=n.createElement("p");k.innerHTML=r;k.style.padding="5px";v.appendChild(k);p=n.createElement("form");f=p.style;p.onsubmit=function(){return s(!1)};f.padding="0";f.margin="0";v.appendChild(p);e=n.createElement("input");e.type="text";e.value=u;e.className="form-control";f=e.style;f.display="block";f.width="80%";f.marginLeft=f.marginRight="auto";p.appendChild(e);l=n.createElement("button");l.className="btn btn-primary";l.type="button";l.onclick=function(){return s(!1)};l.innerHTML="OK";a=n.createElement("button");a.className="btn btn-danger";a.type="button";a.onclick=function(){return s(!0)};a.innerHTML="Cancel";y.appendChild(l);y.appendChild(a);t.addEvent(n.body,"keydown",h);n.body.appendChild(o)};setTimeout(function(){var t,n;c();t=u.length;e.selectionStart!==undefined?(e.selectionStart=0,e.selectionEnd=t):e.createTextRange&&(n=e.createTextRange(),n.collapse(!1),n.moveStart("character",-t),n.moveEnd("character",t),n.select());$(o).on("shown",function(){e.focus()});$(o).on("hidden",function(){o.parentNode.removeChild(o)});$(o).modal()},0)};i=l.prototype;i.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";i.unwrap=function(n){var t=new r("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");n.selection=n.selection.replace(t,"$1 $2")};i.wrap=function(n,t){this.unwrap(n);var i=new r("(.{1,"+t+"})( +|$\\n?)","gm"),u=this;n.selection=n.selection.replace(i,function(n,t){return new r("^"+u.prefixes,"").test(n)?n:t+"\n"});n.selection=n.selection.replace(/\s+$/,"")};i.doBold=function(n,t){return this.doBorI(n,t,2,"strong text")};i.doItalic=function(n,t){return this.doBorI(n,t,1,"emphasized text")};i.doBorI=function(n,t,i,u){var s,e;n.trimWhitespace();n.selection=n.selection.replace(/\n{2,}/g,"\n");var h=/(\**$)/.exec(n.before)[0],f=/(^\**)/.exec(n.after)[0],o=Math.min(h.length,f.length);o>=i&&(o!=2||i!=1)?(n.before=n.before.replace(r("[*]{"+i+"}$",""),""),n.after=n.after.replace(r("^[*]{"+i+"}",""),"")):!n.selection&&f?(n.after=n.after.replace(/^([*_]*)/,""),n.before=n.before.replace(/(\s?)$/,""),s=r.$1,n.before=n.before+f+s):(n.selection||f||(n.selection=u),e=i<=1?"*":"**",n.before=n.before+e,n.after=e+n.after);return};i.stripLinkDefs=function(n,t){return n.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(n,i,r,u,f){return(t[i]=n.replace(/\s*$/,""),u)?(t[i]=n.replace(/["(](.+?)[")]$/,""),u+f):""})};i.addLinkDef=function(n,t){var r=0,i={},s;n.before=this.stripLinkDefs(n.before,i);n.selection=this.stripLinkDefs(n.selection,i);n.after=this.stripLinkDefs(n.after,i);var e="",u=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(n){r++;n=n.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+r+"]:");e+="\n"+n},f=function(n,t,e,s,h,c){return(e=e.replace(u,f),i[h])?(o(i[h]),t+e+s+r+c):n};return n.before=n.before.replace(u,f),t?o(t):n.selection=n.selection.replace(u,f),s=r,n.after=n.after.replace(u,f),n.after&&(n.after=n.after.replace(/\n*$/,"")),n.after||(n.selection=n.selection.replace(/\n*$/,"")),n.after+="\n\n"+e,s};i.doLinkOrImage=function(n,t,i){var u,r;if(n.trimWhitespace(),n.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),n.endTag.length>1&&n.startTag.length>0)n.startTag=n.startTag.replace(/!?\[/,""),n.endTag="",this.addLinkDef(n,null);else{if(n.selection=n.startTag+n.selection+n.endTag,n.startTag=n.endTag="",/\n\n/.test(n.selection)){this.addLinkDef(n,null);return}return u=this,r=function(r){if(r!==null){n.selection=(" "+n.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var f=" [999]: "+nt(r),e=u.addLinkDef(n,f);n.startTag=i?"![":"[";n.endTag="]["+e+"]";n.selection||(n.selection=i?"enter image description here":"enter link description here")}t()},i?this.hooks.insertImageDialog(r)||c.prompt("Insert Image",v,y,r):c.prompt("Insert Link",a,p,r),!0}};i.doAutoindent=function(n){var t=this,i=!1;n.before=n.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");n.before=n.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");n.before=n.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");n.selection||/^[ \t]*(?:\n|$)/.test(n.after)||(n.after=n.after.replace(/^[^\n]*/,function(t){return n.selection=t,""}),i=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(n.before)&&t.doList&&t.doList(n);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(n.before)&&t.doBlockquote&&t.doBlockquote(n);/(\n|^)(\t|[ ]{4,}).*\n$/.test(n.before)&&t.doCode&&t.doCode(n);i&&(n.after=n.selection+n.after,n.selection="")};i.doBlockquote=function(n){var t,u,i,s,r,f,e,h;if(n.selection=n.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,i,r,u){return n.before+=i,n.after=u+n.after,r}),n.before=n.before.replace(/(>[ \t]*)$/,function(t,i){return n.selection=i+n.selection,""}),n.selection=n.selection.replace(/^(\s|>)+$/,""),n.selection=n.selection||"Blockquote",t="",u="",n.before){for(s=n.before.replace(/\n$/,"").split("\n"),r=!1,f=0;f<s.length;f++)e=!1,i=s[f],r=r&&i.length>0,/^>/.test(i)?(e=!0,!r&&i.length>1&&(r=!0)):e=/^[ \t]*$/.test(i)?!0:r,e?t+=i+"\n":(u+=t+i,t="\n");/(^|\n)>/.test(t)||(u+=t,t="")}n.startTag=t;n.before=u;n.after&&(n.after=n.after.replace(/^\n?/,"\n"));n.after=n.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return n.endTag=t,""});h=function(t){var i=t?"> ":"";n.startTag&&(n.startTag=n.startTag.replace(/\n((>|\s)*)\n$/,function(n,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}));n.endTag&&(n.endTag=n.endTag.replace(/^\n((>|\s)*)\n/,function(n,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}))};/^(?![ ]{0,3}>)/m.test(n.selection)?(this.wrap(n,o.lineLength-2),n.selection=n.selection.replace(/^/gm,"> "),h(!0),n.skipLines()):(n.selection=n.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(n),h(!1),!/^(\n|^)[ ]{0,3}>/.test(n.selection)&&n.startTag&&(n.startTag=n.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(n.selection)&&n.endTag&&(n.endTag=n.endTag.replace(/^\n{0,2}/,"\n\n")));n.selection=this.hooks.postBlockquoteCreation(n.selection);/\n/.test(n.selection)||(n.selection=n.selection.replace(/^(> *)/,function(t,i){return n.startTag+=i,""}))};i.doCode=function(n){var r=/\S[ ]*$/.test(n.before),u=/^[ ]*\S/.test(n.after),t,i;(u||r)&&!/\n/.test(n.selection)?(n.trimWhitespace(),n.findTags(/`/,/`/),n.startTag||n.endTag?n.endTag&&!n.startTag?(n.before+=n.endTag,n.endTag=""):n.startTag=n.endTag="":(n.startTag=n.endTag="`",n.selection||(n.selection="enter code here"))):(n.before=n.before.replace(/[ ]{4}$/,function(t){return n.selection=t+n.selection,""}),t=1,i=1,/(\n|^)(\t|[ ]{4,}).*\n$/.test(n.before)&&(t=0),/^\n(\t|[ ]{4,})/.test(n.after)&&(i=0),n.skipLines(t,i),n.selection?/^[ ]{0,3}\S/m.test(n.selection)?/\n/.test(n.selection)?n.selection=n.selection.replace(/^/gm,"    "):n.before+="    ":n.selection=n.selection.replace(/^[ ]{4}/gm,""):(n.startTag="    ",n.selection="enter code here"))};i.doList=function(n,t,i){var l=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,a="-",v=1,y=function(){var n;return i?(n=" "+v+". ",v++):n=" "+a+" ",n},u=function(n){return i===undefined&&(i=/^\s*\d/.test(n)),n.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return y()})},f,e,s,h,c;(n.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!n.before||/\n$/.test(n.before)||/^\n/.test(n.startTag)||(n.before+=n.startTag,n.startTag=""),n.startTag&&(f=/\d+[.]/.test(n.startTag),n.startTag="",n.selection=n.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(n),n.skipLines(),f&&(n.after=n.after.replace(l,u)),i==f))||(e=1,n.before=n.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(n){return/^\s*([*+-])/.test(n)&&(a=r.$1),e=/[^\n]\n\n[^\n]/.test(n)?1:0,u(n)}),n.selection||(n.selection="List item"),s=y(),h=1,n.after=n.after.replace(l,function(n){return h=/[^\n]\n\n[^\n]/.test(n)?1:0,u(n)}),n.trimWhitespace(!0),n.skipLines(e,h,!0),n.startTag=s,c=s.replace(/./g," "),this.wrap(n,o.lineLength-c.length),n.selection=n.selection.replace(/\n/g,"\n"+c))};i.doHeading=function(n){var t,u,f,i;if(n.selection=n.selection.replace(/\s+/g," "),n.selection=n.selection.replace(/(^\s+|\s+$)/g,""),!n.selection){n.startTag="## ";n.selection="Heading";n.endTag=" ##";return}if(t=0,n.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(n.startTag)&&(t=r.lastMatch.length),n.startTag=n.endTag="",n.findTags(null,/\s?(-+|=+)/),/=+/.test(n.endTag)&&(t=1),/-+/.test(n.endTag)&&(t=2),n.startTag=n.endTag="",n.skipLines(1,1),u=t==0?2:t-1,u>0)for(f=u>=2?"-":"=",i=n.selection.length,i>o.lineLength&&(i=o.lineLength),n.endTag="\n";i--;)n.endTag+=f};i.doHorizontalRule=function(n){n.startTag="----------\n";n.selection="";n.skipLines(2,1,!0)}}(),function(){function i(n){return n.replace(/<[^>]*>?/gi,o)}function o(n){return n.match(r)||n.match(u)||n.match(f)||n.match(e)?n:""}function s(n){var i,t;if(n=="")return"";var s=/<\/?\w+[^>]*(\s|$|>)/g,r=n.toLowerCase().match(s),f=(r||[]).length;if(f==0)return n;var e,h,u,o=[],c=[],l=!1;for(t=0;t<f;t++)if(e=r[t].replace(/<\/?(\w+).*/,"$1"),!o[t]&&!("<p><img><br><li><hr>".search("<"+e+">")>-1)){if(h=r[t],u=-1,!/^<\//.test(h))for(i=t+1;i<f;i++)if(!o[i]&&r[i]=="<\/"+e+">"){u=i;break}u==-1?l=c[t]=!0:o[u]=!0}return l?(t=0,n.replace(s,function(n){var i=c[t]?"":n;return t++,i})):n}var n,t;typeof exports=="object"&&typeof require=="function"?(n=exports,t=require("./Markdown.Converter").Converter):(n=window.Markdown,t=n.Converter);n.getSanitizingConverter=function(){var n=new t;return n.hooks.chain("postConversion",i),n.hooks.chain("postConversion",s),n};var r=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,u=/^(<a\shref="(https?:(\/\/|\/)|ftp:(\/\/|\/)|mailto:|magnet:)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,f=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i,e=/^(<pre(\sclass="prettyprint linenums")?>|<\/pre>)$/i}(),function(n){n.fn.pagedownBootstrap=function(t){var i=n.extend({sanitize:!0,help:null,hooks:Array()},t);return this.each(function(){var u=null,e,r,f,t,o;u=i.sanitize?Markdown.getSanitizingConverter():new Markdown.Converter;for(e in i.hooks)(r=i.hooks[e],typeof r=="object"&&typeof r.event!="undefined"&&typeof r.callback=="function")&&u.hooks.chain(r.event,r.callback);for(f="wmd-input",t=0;n("#"+f+"-"+t.toString()).length>0;)t++;n(this).attr("id",f+"-"+t.toString());n(this).wrap('<div class="wmd-panel" />');n(this).before('<div id="wmd-button-bar-'+t+'" class="wmd-button-bar" />');n(this).after('<div id="wmd-preview-'+t+'" class="wmd-preview" />');n(this).addClass("wmd-input");help=null;n.isFunction(i.help)&&(help={handler:i.help});o=new Markdown.Editor(u,"-"+t.toString(),help);o.run()})}}(jQuery);