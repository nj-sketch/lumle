/**
 * @license Input Mask plugin for jquery
 * http://github.com/RobinHerbots/jquery.inputmask
 * Copyright (c) 2010 - 2014 Robin Herbots
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 * Version: 0.0.0
 */
(function(n){if(n.fn.inputmask===undefined){function e(n){var t=document.createElement("input"),n="on"+n,i=n in t;return i||(t.setAttribute(n,"return;"),i=typeof t[n]=="function"),t=null,i}function i(t,r,u){var f=u.aliases[t];return f?(f.alias&&i(f.alias,undefined,u),n.extend(!0,u,f),n.extend(!0,u,r),!0):!1}function u(t,i){function e(n){function s(n,t,i,r){this.matches=[];this.isGroup=n||!1;this.isOptional=t||!1;this.isQuantifier=i||!1;this.isAlternator=r||!1;this.quantifier={min:1,max:1}}function l(n,i,r){var u=t.definitions[i],s=n.matches.length==0,e,h,f;if(r=r!=undefined?r:n.matches.length,u&&!k){for(e=u.prevalidator,h=e?e.length:0,f=1;f<u.cardinality;f++){var c=h>=f?e[f-1]:[],o=c.validator,l=c.cardinality;n.matches.splice(r++,0,{fn:o?typeof o=="string"?new RegExp(o):new function(){this.test=o}:new RegExp("."),cardinality:l?l:1,optionality:n.isOptional,newBlockMarker:s,casing:u.casing,def:u.definitionSymbol||i,placeholder:u.placeholder,mask:i})}n.matches.splice(r++,0,{fn:u.validator?typeof u.validator=="string"?new RegExp(u.validator):new function(){this.test=u.validator}:new RegExp("."),cardinality:u.cardinality,optionality:n.isOptional,newBlockMarker:s,casing:u.casing,def:u.definitionSymbol||i,placeholder:u.placeholder,mask:i})}else n.matches.splice(r++,0,{fn:null,cardinality:0,optionality:n.isOptional,newBlockMarker:s,casing:null,def:i,placeholder:undefined,mask:i}),k=!1}for(var nt=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,k=!1,r=new s,u,h,i=[],g=[],e,w,v,p,a,y,o,f;u=nt.exec(n);){h=u[0];switch(h.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:e=i.pop();i.length>0?i[i.length-1].matches.push(e):r.matches.push(e);break;case t.optionalmarker.start:i.push(new s(!1,!0));break;case t.groupmarker.start:i.push(new s(!0));break;case t.quantifiermarker.start:w=new s(!1,!1,!0);h=h.replace(/[{}]/g,"");var c=h.split(","),d=isNaN(c[0])?c[0]:parseInt(c[0]),b=c.length==1?d:isNaN(c[1])?c[1]:parseInt(c[1]);(b=="*"||b=="+")&&(d=b=="*"?0:1);w.quantifier={min:d,max:b};i.length>0?(a=i[i.length-1].matches,u=a.pop(),u.isGroup||(v=new s(!0),v.matches.push(u),u=v),a.push(u),a.push(w)):(u=r.matches.pop(),u.isGroup||(v=new s(!0),v.matches.push(u),u=v),r.matches.push(u),r.matches.push(w));break;case t.escapeChar:k=!0;break;case t.alternatormarker:p=new s(!1,!1,!1,!0);i.length>0?(a=i[i.length-1].matches,u=a.pop(),p.matches.push(u),i.push(p)):(u=r.matches.pop(),p.matches.push(u),i.push(p));break;default:if(i.length>0){if(l(i[i.length-1],h),y=i[i.length-1],y.isAlternator){for(e=i.pop(),o=0;o<e.matches.length;o++)e.matches[o].isGroup=!1;i.length>0?i[i.length-1].matches.push(e):r.matches.push(e)}}else r.matches.length>0&&(f=r.matches[r.matches.length-1],f.isGroup&&(f.isGroup=!1,l(f,t.groupmarker.start,0),l(f,t.groupmarker.end))),l(r,h)}}if(i.length>0){if(y=i[i.length-1],y.isAlternator)for(o=0;o<y.matches.length;o++)y.matches[o].isGroup=!1;r.matches=r.matches.concat(i)}return r.matches.length>0&&(f=r.matches[r.matches.length-1],f.isGroup&&(f.isGroup=!1,l(f,t.groupmarker.start,0),l(f,t.groupmarker.end)),g.push(r)),g}function u(i,r){var u,f;if(t.numericInput&&t.multi!==!0){for(i=i.split("").reverse(),u=0;u<i.length;u++)i[u]==t.optionalmarker.start?i[u]=t.optionalmarker.end:i[u]==t.optionalmarker.end?i[u]=t.optionalmarker.start:i[u]==t.groupmarker.start?i[u]=t.groupmarker.end:i[u]==t.groupmarker.end&&(i[u]=t.groupmarker.start);i=i.join("")}return i==undefined||i==""?undefined:((t.repeat>0||t.repeat=="*"||t.repeat=="+")&&(f=t.repeat=="*"?0:t.repeat=="+"?1:t.repeat,i=t.groupmarker.start+i+t.groupmarker.end+t.quantifiermarker.start+f+","+t.repeat+t.quantifiermarker.end),n.inputmask.masksCache[i]==undefined&&(n.inputmask.masksCache[i]={mask:i,maskToken:e(i),validPositions:{},_buffer:undefined,buffer:undefined,tests:{},metadata:r}),n.extend(!0,{},n.inputmask.masksCache[i]))}var r=[],f;return n.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),n.isArray(t.mask)?i?n.each(t.mask,function(n,t){t.mask!=undefined?r.push(u(t.mask.toString(),t)):r.push(u(t.toString()))}):(f="("+t.mask.join(")|(")+")",r=u(f)):(t.mask.length==1&&t.greedy==!1&&t.repeat!=0&&(t.placeholder=""),r=t.mask.mask!=undefined?u(t.mask.mask.toString(),t.mask):u(t.mask.toString())),r}var o=typeof ScriptEngineMajorVersion=="function"?ScriptEngineMajorVersion():new Function("/*@cc_on return @_jscript_version; @*/")()>=10,t=navigator.userAgent,s=t.match(new RegExp("iphone","i"))!==null,h=t.match(new RegExp("android.*safari.*","i"))!==null,c=t.match(new RegExp("android.*chrome.*","i"))!==null,l=t.match(new RegExp("android.*firefox.*","i"))!==null,a=/Kindle/i.test(t)||/Silk/i.test(t)||/KFTT/i.test(t)||/KFOT/i.test(t)||/KFJWA/i.test(t)||/KFJWI/i.test(t)||/KFSOWI/i.test(t)||/KFTHWA/i.test(t)||/KFTHWI/i.test(t)||/KFAPWA/i.test(t)||/KFAPWI/i.test(t),f=e("paste")?"paste":e("input")?"input":"propertychange";function r(t,i,r){function ri(n,t,i){var o,s,f,e,h,c,l;t=t||0;o=[];f=0;do n===!0&&u().validPositions[f]?(c=u().validPositions[f],e=c.match,s=c.locator.slice(),o.push(e.fn==null?e.def:i===!0?c.input:e.placeholder||r.placeholder.charAt(f%r.placeholder.length))):(t>f?(l=rt(f,s,f-1),h=l[0]):h=bt(f,s,f-1),e=h.match,s=h.locator.slice(),o.push(e.fn==null?e.def:e.placeholder||r.placeholder.charAt(f%r.placeholder.length))),f++;while((it==undefined||f-1<it)&&e.fn!=null||e.fn==null&&e.def!=""||t>=f);return o.pop(),o}function u(){return i}function tt(n){var t=u();t.buffer=undefined;t.tests={};n!==!0&&(t._buffer=undefined,t.validPositions={},t.p=-1)}function b(n){var s=u(),f=-1,e=s.validPositions,i,r,o,t;n==undefined&&(n=-1);i=f;r=f;for(o in e)t=parseInt(o),(n==-1||e[t].match.fn!=null)&&(t<n&&(i=t),t>=n&&(r=t));return n-i>1||r<n?i:r}function ui(t,i,f){var h,c,e,o,s,l;if(r.insertMode&&u().validPositions[t]!=undefined&&f==undefined){for(h=n.extend(!0,{},u().validPositions),c=b(),e=t;e<=c;e++)delete u().validPositions[e];for(u().validPositions[t]=i,o=!0,e=t;e<=c;e++)if(s=h[e],s!=undefined&&(l=s.match.fn==null?e+1:k(e),o=oi(l,s.match.def)?o&&et(l,s.input,!0,!0)!==!1:!1),!o)break;if(!o)return u().validPositions=n.extend(!0,{},h),!1}else u().validPositions[t]=i;return!0}function fi(n,t){for(var f=n,r,e,o,i=n;i<t;i++)delete u().validPositions[i];for(i=t;i<=b();)e=u().validPositions[i],o=u().validPositions[f],e!=undefined&&o==undefined?(oi(f,e.match.def)&&et(f,e.input,!0)!==!1&&(delete u().validPositions[i],i++),f++):i++;for(r=b();r>0&&(u().validPositions[r]==undefined||u().validPositions[r].match.fn==null);)delete u().validPositions[r],r--;tt(!0)}function bt(n,t,i){for(var e=rt(n,t,i),u,f=0;f<e.length;f++)if(u=e[f],r.greedy||u.match&&(u.match.optionality===!1||u.match.newBlockMarker===!1)&&u.match.optionalQuantifier!==!0)break;return u}function ei(n){return u().validPositions[n]?u().validPositions[n].match:rt(n)[0].match}function oi(n,t){for(var u=!1,r=rt(n),i=0;i<r.length;i++)if(r[i].match&&r[i].match.def==t){u=!0;break}return u}function rt(t,i,f){function c(i,u,f,s){function l(f,s,a){var ft,ot,g,nt,k,st,y,p,ut,w,d;if(o==t&&f.matches==undefined)return e.push({match:f,locator:s.reverse()}),!0;if(f.matches!=undefined){if(f.isGroup&&a!==!0){if(f=l(i.matches[h+1],s),f)return!0}else if(f.isOptional)ft=f,f=c(f,u,s,a),f&&(w=e[e.length-1].match,d=n.inArray(w,ft.matches)==0,d&&(v=!0),o=t);else if(f.isAlternator){var tt=f,et=e.slice(),it,b,ht=s.length,rt=u.length>0?u.shift():-1;if(rt==-1){for(ot=o,e=[],f=c(tt.matches[0],u.slice(),[0].concat(s),a),it=e.slice(),o=ot,e=[],f=c(tt.matches[1],u,[1].concat(s),a),b=e.slice(),e=[],g=0;g<it.length;g++)for(nt=it[g],et.push(nt),k=0;k<b.length;k++)if(st=b[k],nt.match.mask==st.match.mask){b.splice(k,1);nt.locator[ht]=-1;break}e=et.concat(b)}else f=l(tt.matches[rt],[rt].concat(s),a);if(f)return!0}else if(f.isQuantifier&&a!==!0){for(y=f,r.greedy=r.greedy&&isFinite(y.quantifier.max),p=u.length>0&&a!==!0?u.shift():0;p<(isNaN(y.quantifier.max)?p+1:y.quantifier.max)&&o<=t;p++)if(ut=i.matches[n.inArray(y,i.matches)-1],f=l(ut,[p].concat(s),!0),f)if(w=e[e.length-1].match,w.optionalQuantifier=p>y.quantifier.min-1,d=n.inArray(w,ut.matches)==0,d)if(p>y.quantifier.min-1){v=!0;o=t;break}else return!0;else return!0}else if(f=c(f,u,s,a),f)return!0}else o++}for(var a,h=u.length>0?u.shift():0;h<i.matches.length;h++)if(i.matches[h].isQuantifier!==!0){if(a=l(i.matches[h],[h].concat(f),s),a&&o==t)return a;if(o>t)break}}var y=u().maskToken,o=i?f:0,a=i||[0],e=[],v=!1,s,h,l,p;if(i==undefined){for(s=t-1;(h=u().validPositions[s])==undefined&&s>-1;)s--;if(h!=undefined&&s>-1)o=s,a=h.locator.slice();else{for(s=t-1;(h=u().tests[s])==undefined&&s>-1;)s--;h!=undefined&&s>-1&&(o=s,a=h[0].locator.slice())}}for(l=a.shift();l<y.length;l++)if(p=c(y[l],a,[l]),p&&o==t||o>t)break;return(e.length==0||v)&&e.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),u().tests[t]=e,e}function d(){return u()._buffer==undefined&&(u()._buffer=ri(!1,1)),u()._buffer}function v(){return u().buffer==undefined&&(u().buffer=ri(!0,b(),!0)),u().buffer}function kt(n,t){var f=v().slice(),i;if(n===!0)tt(),n=0,t=f.length;else for(i=n;i<t;i++)delete u().validPositions[i],delete u().tests[i];for(i=n;i<t;i++)f[i]!=r.skipOptionalPartCharacter&&et(i,f[i],!0,!0)}function yi(n,t){switch(t.casing){case"upper":n=n.toUpperCase();break;case"lower":n=n.toLowerCase()}return n}function et(t,i,f,e){function a(t,i,f,e){var o=!1;return n.each(rt(t),function(s,h){for(var a,l,y,c=h.match,k=i?1:0,p="",d=v(),w=c.cardinality;w>k;w--)p+=pi(t-(w-1));if(i&&(p+=i),o=c.fn!=null?c.fn.test(p,u(),t,f,r):(i==c.def||i==r.skipOptionalPartCharacter)&&c.def!=""?{c:c.def,pos:t}:!1,o!==!1){if(a=o.c!=undefined?o.c:i,a=a==r.skipOptionalPartCharacter&&c.fn===null?c.def:a,l=t,o.remove!=undefined&&fi(o.remove,o.remove+1),o.refreshFromBuffer){if(y=o.refreshFromBuffer,f=!0,kt(y===!0?y:y.start,y.end),o.pos==undefined&&o.c==undefined)return o.pos=b(),!1;if(l=o.pos!=undefined?o.pos:t,l!=t)return o=n.extend(o,et(l,a,!0)),!1}else if(o!==!0&&o.pos!=undefined&&o.pos!=t&&(l=o.pos,kt(t,l),l!=t))return o=n.extend(o,et(l,a,!0)),!1;return o!=!0&&o.pos==undefined&&o.c==undefined?!1:(s>0&&tt(!0),ui(l,n.extend({},h,{input:yi(a,c)}),e)||(o=!1),!1)}}),o}var y,o,s,h,l,c,p;for(f=f===!0,y=v(),o=t-1;o>-1;o--)if(u().validPositions[o]&&u().validPositions[o].fn==null)break;else if((!ut(o)||y[o]!=at(o))&&rt(o).length>1){a(o,y[o],!0);break}if(s=t,s>=ot())return!1;if(h=a(s,i,f,e),!f&&h===!1)if(l=u().validPositions[s],l&&l.match.fn==null&&(l.match.def==i||i==r.skipOptionalPartCharacter))h={caret:k(s)};else if((r.insertMode||u().validPositions[k(s)]==undefined)&&!ut(s))for(c=s+1,p=k(s);c<=p;c++)if(h=a(c,i,f,e),h!==!1){s=c;break}return h===!0&&(h={pos:s}),h}function ut(n){var t=ei(n);return t.fn!=null?t.fn:!1}function ot(){var i;if(it=e.prop("maxLength"),it==-1&&(it=undefined),r.greedy==!1){for(var f=b(),n=u().validPositions[f],o=n!=undefined?n.locator.slice():undefined,t=f+1;n==undefined||n.match.fn!=null||n.match.fn==null&&n.match.def!="";t++)n=bt(t,o,t-1),o=n.locator.slice();i=t}else i=v().length;return it==undefined||i<it?i:it}function k(n){var i=ot(),t;if(n>=i)return i;for(t=n;++t<i&&!ut(t)&&(r.nojumps!==!0||r.nojumpsThreshold>t););return t}function vt(n){var t=n;if(t<=0)return 0;while(--t>0&&!ut(t));return t}function pi(n){return u().validPositions[n]==undefined?at(n):u().validPositions[n].input}function g(n,t,i){n._valueSet(t.join(""));i!=undefined&&y(n,i)}function at(n,t){return t=t||ei(n),t.placeholder||(t.fn==null?t.def:r.placeholder.charAt(n%r.placeholder.length))}function st(t,i,f,e,o){var h=e!=undefined?e.slice():wi(t._valueGet()).split(""),s;tt();i&&t._valueSet("");n.each(h,function(i,r){if(o===!0){var e=u().p,s=e==-1?e:vt(e),h=s==-1?i:k(s);n.inArray(r,d().slice(s+1,h))==-1&&ni.call(t,undefined,!0,r.charCodeAt(0),!1,f,i)}else ni.call(t,undefined,!0,r.charCodeAt(0),!1,f,i),f=f||i>0&&i>u().p});i&&(s=r.onKeyPress.call(this,undefined,v(),0,r),yt(t,s),g(t,v(),n(t).is(":focus")?k(b(0)):undefined))}function si(t){return n.inputmask.escapeRegex.call(this,t)}function wi(n){return n.replace(new RegExp("("+si(d().join(""))+")*$"),"")}function hi(t){var f,i,e,o,s;if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){f=[];i=u().validPositions;for(e in i)i[e].match&&i[e].match.fn!=null&&f.push(i[e].input);return o=(p?f.reverse():f).join(""),s=(p?v().reverse():v()).join(""),n.isFunction(r.onUnMask)&&(o=r.onUnMask.call(t,s,o,r)),o}return t[0]._valueGet()}function ft(n){if(p&&typeof n=="number"&&(!r.greedy||r.placeholder!="")){var t=v().length;n=t-n}return n}function y(t,i,u){var f=t.jquery&&t.length>0?t[0]:t,e,o;if(typeof i=="number"){if(i=ft(i),u=ft(u),u=typeof u=="number"?u:i,o=n(f).data("_inputmask")||{},o.caret={begin:i,end:u},n(f).data("_inputmask",o),!n(f).is(":visible"))return;f.scrollLeft=f.scrollWidth;r.insertMode==!1&&i==u&&u++;f.setSelectionRange?(f.selectionStart=i,f.selectionEnd=u):f.createTextRange&&(e=f.createTextRange(),e.collapse(!0),e.moveEnd("character",u),e.moveStart("character",i),e.select())}else return o=n(f).data("_inputmask"),!n(f).is(":visible")&&o&&o.caret!=undefined?(i=o.caret.begin,u=o.caret.end):f.setSelectionRange?(i=f.selectionStart,u=f.selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),i=0-e.duplicate().moveStart("character",-1e5),u=i+e.text.length),i=ft(i),u=ft(u),{begin:i,end:u}}function dt(t){for(var s=v(),f=s.length,e=b(),o={},h=u().validPositions[e]!=undefined?u().validPositions[e].locator.slice():undefined,r,i=e+1;i<s.length;i++)r=bt(i,h,i-1),h=r.locator.slice(),o[i]=n.extend(!0,{},r);for(i=f-1;i>e;i--)if(r=o[i].match,(r.optionality||r.optionalQuantifier)&&s[i]==at(i,r))f--;else break;return t?{l:f,def:o[f]?o[f].match:undefined}:f}function gt(n){var i=v(),t=i.slice(),r=dt();t.length=r;g(n,t)}function ht(t){var i,o;if(n.isFunction(r.isComplete))return r.isComplete.call(e,t,r);if(r.repeat=="*")return undefined;var f=!1,u=dt(!0),s=vt(u.l),h=b();if(h==s&&(u.def==undefined||u.def.newBlockMarker||u.def.optionalQuantifier))for(f=!0,i=0;i<=s;i++)if(o=ut(i),o&&(t[i]==undefined||t[i]==at(i))||!o&&t[i]!=at(i)){f=!1;break}return f}function bi(n,t){return p?n-t>1||n-t==1&&r.insertMode:t-n>1||t-n==1&&r.insertMode}function ki(t){var i=n._data(t).events;n.each(i,function(t,i){n.each(i,function(n,t){if(t.namespace=="inputmask"&&t.type!="setvalue"){var i=t.handler;t.handler=function(n){if(this.readOnly||this.disabled)n.preventDefault;else return i.apply(this,arguments)}}})})}function di(t){function f(t){if(n.valHooks[t]==undefined||n.valHooks[t].inputmaskpatch!=!0){var i=n.valHooks[t]&&n.valHooks[t].get?n.valHooks[t].get:function(n){return n.value},r=n.valHooks[t]&&n.valHooks[t].set?n.valHooks[t].set:function(n,t){return n.value=t,n};n.valHooks[t]={get:function(t){var r=n(t);if(r.data("_inputmask")){if(r.data("_inputmask").opts.autoUnmask)return r.inputmask("unmaskedvalue");var f=i(t),e=r.data("_inputmask"),o=e.maskset,u=o._buffer;return u=u?u.join(""):"",f!=u?f:""}return i(t)},set:function(t,i){var e=n(t),u=e.data("_inputmask"),f;return u?(f=r(t,n.isFunction(u.opts.onBeforeMask)?u.opts.onBeforeMask.call(w,i,u.opts):i),e.triggerHandler("setvalue.inputmask")):f=r(t,i),f},inputmaskpatch:!0}}}var u,i,r;Object.getOwnPropertyDescriptor&&(u=Object.getOwnPropertyDescriptor(t,"value"));u&&u.get?t._valueGet||(i=u.get,r=u.set,t._valueGet=function(){return p?i.call(this).split("").reverse().join(""):i.call(this)},t._valueSet=function(n){r.call(this,p?n.split("").reverse().join(""):n)},Object.defineProperty(t,"value",{get:function(){var r=n(this),t=n(this).data("_inputmask");return t?t.opts.autoUnmask?r.inputmask("unmaskedvalue"):i.call(this)!=d().join("")?i.call(this):"":i.call(this)},set:function(t){var i=n(this).data("_inputmask");i?(r.call(this,n.isFunction(i.opts.onBeforeMask)?i.opts.onBeforeMask.call(w,t,i.opts):t),n(this).triggerHandler("setvalue.inputmask")):r.call(this,t)}})):document.__lookupGetter__&&t.__lookupGetter__("value")?t._valueGet||(i=t.__lookupGetter__("value"),r=t.__lookupSetter__("value"),t._valueGet=function(){return p?i.call(this).split("").reverse().join(""):i.call(this)},t._valueSet=function(n){r.call(this,p?n.split("").reverse().join(""):n)},t.__defineGetter__("value",function(){var r=n(this),t=n(this).data("_inputmask");return t?t.opts.autoUnmask?r.inputmask("unmaskedvalue"):i.call(this)!=d().join("")?i.call(this):"":i.call(this)}),t.__defineSetter__("value",function(t){var i=n(this).data("_inputmask");i?(r.call(this,n.isFunction(i.opts.onBeforeMask)?i.opts.onBeforeMask.call(w,t,i.opts):t),n(this).triggerHandler("setvalue.inputmask")):r.call(this,t)})):(t._valueGet||(t._valueGet=function(){return p?this.value.split("").reverse().join(""):this.value},t._valueSet=function(n){this.value=p?n.split("").reverse().join(""):n}),f(t.type))}function ci(n,t,i){var e,f;(r.numericInput||p)&&(t==r.keyCode.BACKSPACE?t=r.keyCode.DELETE:t==r.keyCode.DELETE&&(t=r.keyCode.BACKSPACE),p&&(e=i.end,i.end=i.begin,i.begin=e));t==r.keyCode.BACKSPACE&&i.end-i.begin<=1?i.begin=vt(i.begin):t==r.keyCode.DELETE&&i.begin==i.end&&i.end++;fi(i.begin,i.end);f=b(i.begin);u().p=f<i.begin?k(f):i.begin}function yt(n,t,i){if(t&&t.refreshFromBuffer){var r=t.refreshFromBuffer;kt(r===!0?r:r.start,r.end);tt(!0);i!=undefined&&(g(n,v()),y(n,t.caret||i.begin,t.caret||i.end))}}function li(t){var h,c;wt=!1;var f=this,o=n(f),i=t.keyCode,e=y(f);i==r.keyCode.BACKSPACE||i==r.keyCode.DELETE||s&&i==127||t.ctrlKey&&i==88?(t.preventDefault(),i==88&&(nt=v().join("")),ci(f,i,e),g(f,v(),u().p),f._valueGet()==d().join("")&&o.trigger("cleared"),r.showTooltip&&o.prop("title",u().mask)):i==r.keyCode.END||i==r.keyCode.PAGE_DOWN?setTimeout(function(){var n=k(b());r.insertMode||n!=ot()||t.shiftKey||n--;y(f,t.shiftKey?e.begin:n,n)},0):(i!=r.keyCode.HOME||t.shiftKey)&&i!=r.keyCode.PAGE_UP?i==r.keyCode.ESCAPE||i==90&&t.ctrlKey?(st(f,!0,!1,nt.split("")),o.click()):i!=r.keyCode.INSERT||t.shiftKey||t.ctrlKey?r.insertMode!=!1||t.shiftKey||(i==r.keyCode.RIGHT?setTimeout(function(){var n=y(f);y(f,n.begin)},0):i==r.keyCode.LEFT&&setTimeout(function(){var n=y(f);y(f,p?n.begin+1:n.begin-1)},0)):(r.insertMode=!r.insertMode,y(f,!r.insertMode&&e.begin==ot()?e.begin-1:e.begin)):y(f,0,t.shiftKey?e.begin:0);h=y(f);c=r.onKeyDown.call(this,t,v(),h.begin,r);yt(f,c,h);ii=n.inArray(i,r.ignorables)!=-1}function ni(t,i,f,e,o,s){var a,nt,f,l,d,it,ut,w,c,h,ft,ct,ot,st,at,bt,pt;if(f==undefined&&wt)return!1;if(wt=!0,a=this,nt=n(a),t=t||window.event,f=i?f:t.which||t.charCode||t.keyCode,i===!0||t.ctrlKey&&t.altKey||!(t.ctrlKey||t.metaKey||ii)){if(f){i!==!0&&f==46&&t.shiftKey==!1&&r.radixPoint==","&&(f=44);it=String.fromCharCode(f);i?(ut=o?s:b()+1,l={begin:ut,end:ut}):l=y(a);w=bi(l.begin,l.end);w&&(u().undoPositions=n.extend(!0,{},u().validPositions),ci(a,r.keyCode.DELETE,l),r.insertMode||(r.insertMode=!r.insertMode,ui(l.begin,o),r.insertMode=!r.insertMode),w=!r.multi);u().writeOutBuffer=!0;c=p&&!w?l.end:l.begin;h=et(c,it,o);h!==!1&&(h!==!0&&(c=h.pos!=undefined?h.pos:c,it=h.c!=undefined?h.c:it),tt(!0),h.caret!=undefined?d=h.caret:(ft=u().validPositions,d=ft[c+1]!=undefined&&rt(c+1,ft[c].locator.slice(),c).length>1?c+1:k(c)),u().p=d);e!==!1?(ct=this,setTimeout(function(){r.onKeyValidation.call(ct,h,r)},0),u().writeOutBuffer&&h!==!1?(ot=v(),g(a,ot,i?undefined:r.numericInput?vt(d):d),i!==!0&&setTimeout(function(){ht(ot)===!0&&nt.trigger("complete");lt=!0;nt.trigger("input")},0)):w&&(u().buffer=undefined,u().validPositions=u().undoPositions)):w&&(u().buffer=undefined,u().validPositions=u().undoPositions);r.showTooltip&&nt.prop("title",u().mask);t&&i!=!0&&(t.preventDefault?t.preventDefault():t.returnValue=!1,st=y(a),at=r.onKeyPress.call(this,t,v(),st.begin,r),yt(a,at,st));for(pt in u().validPositions)bt+=" "+pt}}else return!0}function gi(t){var e=n(this),i=this,o=t.keyCode,u=v(),f=y(i),s=r.onKeyUp.call(this,t,u,f.begin,r);yt(i,s,f);o==r.keyCode.TAB&&r.showMaskOnFocus&&(e.hasClass("focus-inputmask")&&i._valueGet().length==0?(tt(),u=v(),g(i,u),y(i,0),nt=v().join("")):(g(i,u),y(i,ft(0),ft(ot()))))}function ai(t){var e;if(lt===!0&&t.type=="input")return lt=!1,!0;var i=this,f=n(i),u=i._valueGet();return t.type=="propertychange"&&i._valueGet().length<=ot()?!0:(t.type=="paste"&&(window.clipboardData&&window.clipboardData.getData?u=window.clipboardData.getData("Text"):t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(u=t.originalEvent.clipboardData.getData("text/plain"))),e=n.isFunction(r.onBeforePaste)?r.onBeforePaste.call(i,u,r):u,st(i,!0,!1,e.split(""),!0),f.click(),ht(v())===!0&&f.trigger("complete"),!1)}function nr(n){if(lt===!0&&n.type=="input")return lt=!1,!0;var u=this,t=y(u),i=u._valueGet();i=i.replace(new RegExp("("+si(d().join(""))+")*"),"");t.begin>i.length&&(y(u,i.length),t=y(u));v().length-i.length!=1||i.charAt(t.begin)==v()[t.begin]||i.charAt(t.begin+1)==v()[t.begin]||ut(t.begin)||(n.keyCode=r.keyCode.BACKSPACE,li.call(u,n));n.preventDefault()}function tr(t){var s,w,it;if(e=n(t),e.is(":input")&&e.attr("type")!="number"){e.data("_inputmask",{maskset:i,opts:r,isRTL:!1});r.showTooltip&&e.prop("title",u().mask);di(t);(t.dir=="rtl"||r.rightAlign)&&e.css("text-align","right");(t.dir=="rtl"||r.numericInput)&&(t.dir="ltr",e.removeAttr("dir"),s=e.data("_inputmask"),s.isRTL=!0,e.data("_inputmask",s),p=!0);e.unbind(".inputmask");e.removeClass("focus-inputmask");e.closest("form").bind("submit",function(){nt!=v().join("")&&e.change();r.autoUnmask&&r.removeMaskOnSubmit&&e.inputmask("remove")}).bind("reset",function(){setTimeout(function(){e.trigger("setvalue")},0)});e.bind("mouseenter.inputmask",function(){var i=n(this),t=this;!i.hasClass("focus-inputmask")&&r.showMaskOnHover&&t._valueGet()!=v().join("")&&g(t,v())}).bind("blur.inputmask",function(){var i=n(this),t=this,f,u;i.data("_inputmask")&&(f=t._valueGet(),u=v(),i.removeClass("focus-inputmask"),nt!=v().join("")&&i.change(),r.clearMaskOnLostFocus&&f!=""&&(f==d().join("")?t._valueSet(""):gt(t)),ht(u)===!1&&(i.trigger("incomplete"),r.clearIncomplete&&(tt(),r.clearMaskOnLostFocus?t._valueSet(""):(u=d().slice(),g(t,u)))))}).bind("focus.inputmask",function(){var i=n(this),t=this,u=t._valueGet();r.showMaskOnFocus&&!i.hasClass("focus-inputmask")&&(!r.showMaskOnHover||r.showMaskOnHover&&u=="")&&t._valueGet()!=v().join("")&&g(t,v(),k(b()));i.addClass("focus-inputmask");nt=v().join("")}).bind("mouseleave.inputmask",function(){var i=n(this),t=this;r.clearMaskOnLostFocus&&(i.hasClass("focus-inputmask")||t._valueGet()==i.attr("placeholder")||(t._valueGet()==d().join("")||t._valueGet()==""?t._valueSet(""):gt(t)))}).bind("click.inputmask",function(){var t=this;n(t).is(":focus")&&setTimeout(function(){var i=y(t);if(i.begin==i.end){var n=p?ft(i.begin):i.begin,u=b(n),r=k(u);n<r?ut(n)?y(t,n):y(t,k(n)):y(t,r)}},0)}).bind("dblclick.inputmask",function(){var n=this;setTimeout(function(){y(n,0,k(b()))},0)}).bind(f+".inputmask dragdrop.inputmask drop.inputmask",ai).bind("setvalue.inputmask",function(){var n=this;st(n,!0);nt=v().join("")}).bind("complete.inputmask",r.oncomplete).bind("incomplete.inputmask",r.onincomplete).bind("cleared.inputmask",r.oncleared);e.bind("keydown.inputmask",li).bind("keypress.inputmask",ni).bind("keyup.inputmask",gi);(h||l||c||a)&&(f=="input"&&e.unbind(f+".inputmask"),e.bind("input.inputmask",nr));o&&e.bind("input.inputmask",ai);w=n.isFunction(r.onBeforeMask)?r.onBeforeMask.call(t,t._valueGet(),r):t._valueGet();st(t,!0,!1,w.split(""),!0);nt=v().join("");try{it=document.activeElement}catch(rt){}ht(v())===!1&&r.clearIncomplete&&tt();r.clearMaskOnLostFocus?v().join("")==d().join("")?t._valueSet(""):gt(t):g(t,v());it===t&&(e.addClass("focus-inputmask"),y(t,k(b())));ki(t)}}var p=!1,nt,e,wt=!1,lt=!1,ii=!1,it,ct,pt,vi,w,ti;if(t!=undefined)switch(t.action){case"isComplete":return e=n(t.el),i=e.data("_inputmask").maskset,r=e.data("_inputmask").opts,ht(t.buffer);case"unmaskedvalue":return e=t.$input,i=e.data("_inputmask").maskset,r=e.data("_inputmask").opts,p=t.$input.data("_inputmask").isRTL,hi(t.$input);case"mask":nt=v().join("");tr(t.el);break;case"format":return e=n({}),e.data("_inputmask",{maskset:i,opts:r,isRTL:r.numericInput}),r.numericInput&&(p=!0),ct=t.value.split(""),st(e,!1,!1,p?ct.reverse():ct,!0),p?v().reverse().join(""):v().join("");case"isValid":return e=n({}),e.data("_inputmask",{maskset:i,opts:r,isRTL:r.numericInput}),r.numericInput&&(p=!0),ct=t.value.split(""),st(e,!1,!0,p?ct.reverse():ct),pt=v(),vi=dt(),pt.length=vi,ht(pt)&&t.value==pt.join("");case"getemptymask":return e=n(t.el),i=e.data("_inputmask").maskset,r=e.data("_inputmask").opts,d();case"remove":w=t.el;e=n(w);i=e.data("_inputmask").maskset;r=e.data("_inputmask").opts;w._valueSet(hi(e));e.unbind(".inputmask");e.removeClass("focus-inputmask");e.removeData("_inputmask");Object.getOwnPropertyDescriptor&&(ti=Object.getOwnPropertyDescriptor(w,"value"));ti&&ti.get?w._valueGet&&Object.defineProperty(w,"value",{get:w._valueGet,set:w._valueSet}):document.__lookupGetter__&&w.__lookupGetter__("value")&&w._valueGet&&(w.__defineGetter__("value",w._valueGet),w.__defineSetter__("value",w._valueSet));try{delete w._valueGet;delete w._valueSet}catch(ir){w._valueGet=undefined;w._valueSet=undefined}}}n.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:n.noop,onincomplete:n.noop,oncleared:n.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!0,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyUp:n.noop,onKeyPress:n.noop,onKeyDown:n.noop,onBeforeMask:undefined,onBeforePaste:undefined,onUnMask:undefined,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:n.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,radixPoint:"",nojumps:!1,nojumpsThreshold:0,definitions:{"9":{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁё]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:undefined},masksCache:{},escapeRegex:function(n){return n.replace(new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")},format:function(t,f){var e=n.extend(!0,{},n.inputmask.defaults,f);return i(e.alias,f,e),r({action:"format",value:t},u(e),e)},isValid:function(t,f){var e=n.extend(!0,{},n.inputmask.defaults,f);return i(e.alias,f,e),r({action:"isValid",value:t},u(e),e)}};n.fn.inputmask=function(t,f,e,o,s){function a(t,i){var f=n(t),r,u;for(r in i)u=f.data("inputmask-"+r.toLowerCase()),u!=undefined&&(i[r]=u);return i}var h,c,l;if(e=e||r,o=o||"_inputmask",h=n.extend(!0,{},n.inputmask.defaults,f),typeof t=="string")switch(t){case"mask":return(i(h.alias,f,h),c=u(h,e!==r),c.length==0)?this:this.each(function(){e({action:"mask",el:this},n.extend(!0,{},c),a(this,h))});case"unmaskedvalue":return l=n(this),l.data(o)?e({action:"unmaskedvalue",$input:l}):l.val();case"remove":return this.each(function(){var t=n(this);t.data(o)&&e({action:"remove",el:this})});case"getemptymask":return this.data(o)?e({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data(o)?!this.data(o).opts.autoUnmask:!1;case"isComplete":return this.data(o)?e({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data(o)?(c=this.data(o).maskset,c.metadata):undefined;case"_detectScope":return i(h.alias,f,h),s==undefined||i(s,f,h)||n.inArray(s,["mask","unmaskedvalue","remove","getemptymask","hasMaskedValue","isComplete","getmetadata","_detectScope"])!=-1||(h.mask=s),n.isFunction(h.mask)&&(h.mask=h.mask.call(this,h)),n.isArray(h.mask);default:return(i(h.alias,f,h),i(t,f,h)||(h.mask=t),c=u(h,e!==r),c==undefined)?this:this.each(function(){e({action:"mask",el:this},n.extend(!0,{},c),a(this,h))})}else{if(typeof t=="object")return(h=n.extend(!0,{},n.inputmask.defaults,t),i(h.alias,t,h),c=u(h,e!==r),c==undefined)?this:this.each(function(){e({action:"mask",el:this},n.extend(!0,{},c),a(this,h))});if(t==undefined)return this.each(function(){var t=n(this).attr("data-inputmask"),r;if(t&&t!="")try{t=t.replace(new RegExp("'","g"),'"');r=n.parseJSON("{"+t+"}");n.extend(!0,r,f);h=n.extend(!0,{},n.inputmask.defaults,r);i(h.alias,r,h);h.alias=undefined;n(this).inputmask("mask",h,e)}catch(u){}})}}}})(jQuery);