$(function(){function u(){var n=[];return $("input:checkbox[name=ckbox]:checked").each(function(){n.push($(this).val())}),n}function f(n,r){var u=JSON.stringify({RoleId:i,ClaimValues:r}),f=$("input[type=hidden][name=__RequestVerificationToken]").val();$.ajax({url:n,type:"POST",contentType:"application/json",data:u,headers:{RequestVerificationToken:f},success:function(n){$("#btnSubmit").removeProp("disabled");$("#loadingImg").hide();$("input[type=checkbox]").removeProp("disabled");n.success?(t(),$("#info").html("<p>"+n.message+"<\/p>"),$("#info").addClass("col-md-12 alert alert-success")):(t(),$("#info").html("<p>"+n.message+"<\/p>"),$("#info").addClass("col-md-12 alert alert-danger"));$("html, body").animate({scrollTop:$("#page-header").offset().top},1800)},error:function(){$("#btnSubmit").removeProp("disabled");$("#loadingImg").hide();$("input[type=checkbox]").removeProp("disabled");t();$("#info").html("<p>An error has occurred, Please try again later.<\/p>");$("#info").addClass("col-md-12 alert alert-danger");$("html, body").animate({scrollTop:$("#page-header").offset().top},1800)}})}function t(){$("#info").html("");$("#info").removeAttr("class")}function e(){var n=$("input:checkbox[name=ckbox]:checked"),t=n.length,i=$(".checkList").length;t===i?$("#checkAll").prop("checked","checked"):$("#checkAll").removeProp("checked")}var n="read",r="delete",i;$("#info").html("");i="";i=$("#roleid").html();$("#btnCancel").on("click",function(){window.location.href=rootDir+"role"});$("#btnSubmit").on("click",function(){$("#info").html("");var n=u(),i=rootDir+"authorization/Role/permission";n.length>0?($(this).prop("disabled",!0),$("#loadingImg").show(),$("input[type=checkbox]").prop("disabled",!0),f(i,n)):(t(),$("#info").html("<p>Please Select role permission first.<\/p>"),$("#info").addClass("col-md-12 alert alert-danger"),$("html, body").animate({scrollTop:$("#page-header").offset().top},1800))});e();$("#checkAll").on("click",function(){$('input[type="checkbox"]').prop("checked",this.checked)});$("input:checkbox[name=ckbox]").on("click",function(){var t=$(this).val().split("."),i=t[t.length-1].toLowerCase().trim(),u,f;if($(this).is(":checked")){if(i!==n&&i!==r){for(u="",f=0;f<=t.length-1;f++)f!==t.length-1?(u+=t[f].trim(),u+="."):u+=n;$("input:checkbox[value='"+u+"']").prop("checked",!0)}i!==n&&i===r&&$(this).closest("div .submodule").find("input:checkbox[name=ckbox]").prop("checked",!0)}else i===n&&$(this).closest("div .submodule").find("input:checkbox[name=ckbox]").prop("checked",!1);var e=$("input:checkbox[name=ckbox]:checked"),o=e.length,s=$(".checkList").length;o===s?$("#checkAll").prop("checked",this.checked):$("#checkAll").removeProp("checked")})});